:root{
  --accent:#2b4a7f;
  --panel:rgba(255,255,255,0.85);
  --panel-alt:rgba(255,255,255,0.7);
  --shadow:0 6px 22px rgba(17,17,17,0.08);
  --radius:16px;
}

@import url('https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@400;500;600;700&family=Noto+Sans+JP:wght@300;400;600;700&display=swap');

*{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{
  font-family:'Noto Sans JP',sans-serif;
  color:#111;background:#f7f7f7;line-height:1.9;font-size:17px;
  position:relative;overflow-x:hidden;
}

/* 背景 */
body::before{
  content:"";position:fixed;inset:0;
  background:url("images/初めに.jpg") center/cover no-repeat;
  opacity:.25;filter:blur(2px);z-index:-1;
}

/* Header */
header{
  position:sticky;top:0;display:flex;justify-content:center;align-items:center;
  padding:10px 0 4px;background:rgba(255,255,255,.9);
  backdrop-filter:blur(6px);box-shadow:0 2px 14px rgba(0,0,0,.08);
  border-bottom:3px solid rgba(210,180,255,.3);z-index:10;
}
#menu-toggle{
  position:absolute;left:20px;top:50%;transform:translateY(-50%);
  font-size:26px;background:none;border:none;cursor:pointer;
  display:none; /* ★最初からサイドメニュー表示するので不要 */
}
header h1{
  font-family:'Great Vibes',cursive;
  font-size:clamp(38px,4.5vw,66px);
  color:#3c3060;text-shadow:2px 2px 10px rgba(60,40,100,.3);
}
header::after{
  content:"";position:absolute;bottom:0;left:25%;width:50%;height:2px;
  background:linear-gradient(to right,#d5b880,#f0e2a3,#d5b880);
}

/* サイドメニュー */
.side-menu{
  position:fixed;left:0;top:0;width:280px;height:100vh; /* ★最初から表示 */
  background: rgba(235, 217, 214, 0.95); /* #ebd9d6 */
  box-shadow:var(--shadow);
  transition:left .28s ease;padding-top:64px;z-index:1000;
  backdrop-filter:blur(8px);
}
.side-menu.open{left:0} /* ★互換のため残す */
#close-menu{
  position:absolute;right:12px;top:12px;
  font-size:22px;border:none;background:none;cursor:pointer;
  display:none; /* ★常時表示にするので閉じるボタンは不要 */
}
.side-menu.open #close-menu{display:none}
.side-menu ul{list-style:none;padding:0;margin:0}
.side-menu li{border-bottom:1px solid rgba(0,0,0,.06)}
.side-menu a{
  display:block;padding:14px 20px;text-decoration:none;
  color: #da95ab; /* ★ Home / Message / Gallery / With Love の色 */
  font-weight:600;font-family:'Poppins',sans-serif;
  font-size:20px;transition:background .2s ease, color .2s ease;
}
.side-menu a:hover{
  background:rgba(255,255,255,.5);
  color:#6f97b8; /* ★ hover時は少し濃く */
}

/* セクション */
main{
  max-width:980px;
  margin:0 auto 80px;
  padding:0 24px;
  padding-left:calc(24px + 280px); /* ★左メニュー分だけコンテンツを右へ */
}
.section{display:none;background:var(--panel);box-shadow:var(--shadow);
  border-radius:var(--radius);padding:28px 28px 32px;margin:24px 0;backdrop-filter:blur(3px)}
.section.active{display:block}

/* ===== 白い枠の横幅：messages と同じサイズに gallery / rsvp も揃える ===== */
#messages.section,
#gallery.section,
#rsvp.section,
#student-gallery.section{
  width:150%;
  margin-left:-25%;
}

/* ホーム */
#intro:not(.active){display:none!important}
.section-hero{
  display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
  padding-top:10px;min-height:calc(100vh - 100px);
  background:none;box-shadow:none;
}
.hero-inner{display:flex;flex-direction:column;align-items:center;justify-content:center}
.hero-image{
  width:80vw;max-width:800px;border-radius:20px;
  box-shadow:0 10px 25px rgba(0,0,0,.25);
  margin:0 0 30px;object-fit:cover;
}
.hero-actions{display:flex;gap:20px;flex-wrap:wrap;justify-content:center}
.btn{
  border:2px solid var(--accent);background:white;padding:12px 28px;border-radius:50px;
  cursor:pointer;font-weight:600;color:var(--accent);font-size:18px;
  font-family:'Poppins',sans-serif;text-decoration:none;transition:all .2s ease;
}
.btn-primary{background:var(--accent);color:white}
.btn-primary:hover{background:#3b5da0}
.btn-outline:hover{background:var(--accent);color:white}

/* 見出し・本文 */
section h2{
  font-weight:700;color:var(--accent);
  font-size:clamp(26px,3vw,38px);margin:6px 0 16px;text-align:center;
  font-family:'Noto Sans JP',sans-serif;
}
section h3{
  font-size:22px;margin-top:28px;margin-bottom:8px;font-weight:600;
  border-left:3px solid var(--accent);padding-left:10px;color:#444;
}
section p{font-size:17px;color:#111;line-height:1.9;margin:0 0 16px}

/* ====== （以前の修正）メッセージのタブ領域を横幅1.5倍（残してOK） ====== */
#messages .tabs,
#messages .tab-panels{
  width:150%;
  margin-left:-25%;
}

/* メッセージ内部タブ */
.tabs{
  display:grid;grid-template-columns:repeat(3,1fr);
  gap:8px;margin:16px 0 14px;
}
.tab-button{
  border:1px solid #d9dbe1;background:#fff;padding:10px 12px;border-radius:10px;
  cursor:pointer;font-weight:600;color:#24314d;
  font-family:'Noto Sans JP',sans-serif;
  transition:box-shadow .2s ease, background .2s ease, border-color .2s ease;
}
.tab-button:hover{background:#f7f8fb}
.tab-button.active{
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(43,74,127,.12);
  background:#f3f6fb;
}
.tab-panels{margin-top:8px}
.tab-panel{display:none}
.tab-panel.active{display:block}

.message-list{
  list-style:none;padding-left:0;margin:12px 0 0;
  display:grid;gap:12px;
}
.message-list li{
  background:rgba(255,255,255,.9);
  border:1px solid #e7e9ef;
  border-radius:12px;padding:14px 16px;
}

/* ====== （直近の修正）中身は枠に収める ====== */
#messages.section .tabs,
#messages.section .tab-panels{
  width:100%;
  margin-left:0;
}

/* フェードイン */
#veil{
  position:fixed;inset:0;background:black;opacity:1;
  transition:opacity 1.8s ease-in-out;z-index:9999;
}
body.loaded #veil{opacity:0;pointer-events:none}
@media (prefers-reduced-motion:reduce){#veil{transition:none;opacity:0}}

/* スマホ共通 */
@media (max-width:680px){
  body{font-size:16.5px}
  main{
    padding:0 18px;          /* ★スマホはメニュー分の余白を戻す */
    padding-left:18px;       /* ★ */
  }
  .section{padding:22px 18px 26px;border-radius:14px}
  .tabs{grid-template-columns:1fr}
  .hero-image{width:90vw;margin-bottom:24px}
  .hero-actions{flex-direction:column;gap:14px}
  .btn{width:100%}

  /* ★スマホではサイドメニューは従来通り「隠して開く」に戻す */
  .side-menu{left:-280px}
  .side-menu.open{left:0}
  #menu-toggle{display:block}
  #close-menu{display:none}
  .side-menu.open #close-menu{display:block}

  /* ★スマホでは白枠を広げない（はみ出し防止） */
  #messages.section,
  #gallery.section,
  #rsvp.section,
  #student-gallery.section{
    width:auto;
    margin-left:0;
  }

  /* ★スマホでは中身も通常幅 */
  #messages .tabs,
  #messages .tab-panels{
    width:100%;
    margin-left:0;
  }
}

/* ===== 「友人からのメッセージ」見出しを通常と同じサイズに戻す ===== */
/* ※ もともとあった #messages h2 の筆記体＆大きい指定を無効化して、通常の section h2 に揃える */
#messages h2{
  font-family:'Noto Sans JP',sans-serif;
  font-weight:700;
  color:var(--accent);
  font-size:clamp(26px,3vw,38px);
  text-shadow:none;
  margin:6px 0 16px;
  text-align:center;
}

/* ===== ギャラリー一覧（1列・横並びボタン） ===== */
.gallery-grid{
  list-style:none;
  display:grid;
  grid-template-columns:1fr;
  gap:16px;
  padding:4px 2px 0;
  margin:8px 0 0;
}
.gallery-card{
  background:rgba(255,255,255,.92);
  border:1px solid #e7e9ef;
  border-radius:14px;
  box-shadow:var(--shadow);
  overflow:hidden;
  transition:transform .15s ease, box-shadow .15s ease;
}
.gallery-card:hover{
  transform:translateY(-2px);
  box-shadow:0 10px 28px rgba(0,0,0,.12);
}
.gallery-link{display:block;text-decoration:none;color:inherit}
.gallery-row{
  display:grid;
  grid-template-columns:minmax(220px, 38%) 1fr;
  min-height:200px;
}
.gallery-row img{
  width:100%;height:100%;object-fit:cover;display:block;
}
.gallery-row figcaption{
  padding:14px 16px;
  font-size:18px;font-weight:700;color:#24314d;
  display:flex;align-items:center;
  background:linear-gradient(180deg, rgba(255,255,255,.95), rgba(255,255,255,.9));
  border-left:1px solid rgba(0,0,0,.08); /* 視認性UP */
}
@media (max-width:560px){
  .gallery-row{min-height:160px;grid-template-columns:minmax(150px,45%) 1fr}
}

/* ===== アルバム（写真＋見出し＋詳細コメント／縦線区切り） ===== */
.album-header{
  display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap;
  margin-bottom:12px;
}
.album-header h2{margin:0 auto;text-align:center;flex:1}

.album-list{
  list-style:none;
  display:grid;
  grid-template-columns:1fr;
  gap:16px;
}
.album-card{
  background:rgba(255,255,255,.92);
  border:1px solid #e7e9ef;
  border-radius:14px;
  box-shadow:var(--shadow);
  overflow:hidden;
}
.album-row{
  display:grid;
  grid-template-columns:minmax(220px, 38%) 1fr;
  min-height:220px;
}
.album-row img{
  width:100%;height:100%;object-fit:cover;display:block;
}
.album-row figcaption{
  padding:16px 18px;
  background:linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.92));
  border-left:1px solid rgba(0,0,0,.1);  /* ← 縦線 */
  display:flex;flex-direction:column;justify-content:center;gap:6px;
}
.caption-title{
  font-weight:700;
  font-size:clamp(18px,2.2vw,20px);
  color:#1f2a44;
}
.caption-detail{
  font-size:15px;line-height:1.8;color:#44516b;
}

@media (max-width:560px){
  .album-row{min-height:180px;grid-template-columns:minmax(150px,45%) 1fr}
  .caption-detail{font-size:14.5px}
}

/* ===== 「一覧に戻る / 学生編」ボタンが横並びのページ（album-headerがある白枠）を1.5倍 ===== */
.section:has(.album-header){
  width:150%;
  margin-left:-25%;
}

@media (max-width:680px){
  .section:has(.album-header){
    width:auto;
    margin-left:0;
  }
}


/* ===== 学生編・一覧に戻る系ページの白枠を1.5倍 ===== */
/* ・album-header があるページ（一覧に戻る / 学生編 横並びボタン）
   ・学生編トップページ（#student.section 想定） */

.section:has(.album-header),
#student.section{
  width:150%;
  margin-left:-25%;
}

/* ===== スマホでは広げない ===== */
@media (max-width:680px){
  .section:has(.album-header),
  #student.section{
    width:auto;
    margin-left:0;
  }
}
